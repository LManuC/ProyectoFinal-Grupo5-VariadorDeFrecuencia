\doxysection{Referencia del archivo C\+:/\+Users/\+User/\+LVFV\+\_\+\+ESP32/main/io\+\_\+control/io\+\_\+control.h}
\hypertarget{io__control_8h}{}\label{io__control_8h}\index{C:/Users/User/LVFV\_ESP32/main/io\_control/io\_control.h@{C:/Users/User/LVFV\_ESP32/main/io\_control/io\_control.h}}


Declaración de funciones de control del relay, buzzer y tarea del uso del expansor de entradas y salidas y entradas y salidas aisladas directas al ESP32.  


\doxysubsubsection*{Funciones}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{io__control_8h_af7133eb911ac63b8e81d756ec399ff78}{GPIO\+\_\+interrupt\+\_\+attendance\+\_\+task}} (void \texorpdfstring{$\ast$}{*}arg)
\begin{DoxyCompactList}\small\item\em Tarea que en función de las interrupciones recibidas permite obtener cual de los pulsadores del teclado, entradas aisladas, termo switch o entradas del MCP2307 fue presionado. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{io__control_8h_aa4fbc272de389e539360bb6b7876dd7d}{set\+\_\+freq\+\_\+output}} (uint16\+\_\+t freq)
\begin{DoxyCompactList}\small\item\em Convierte la frecuencia en Hz que está girando el motor en el duty necesario para poder operar el PWM de la salida 0-\/10V. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{io__control_8h_a99f1c5e09ded6ba05fdd6b1f9d76db99}{Relay\+Evant\+Post}} (uint8\+\_\+t relay\+\_\+event)
\begin{DoxyCompactList}\small\item\em Crea un evento para que el relay se activo o desactive de acuerdo a la variable {\ttfamily relay\+\_\+event}. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{io__control_8h_aed21490f8fc34ffb3d9021ed1cf7214a}{Buzzer\+Evant\+Post}} (uint32\+\_\+t buzzer\+\_\+time\+\_\+on)
\begin{DoxyCompactList}\small\item\em Envía una señal para hacer sonar el buzzer durante {\ttfamily buzzer\+\_\+time\+\_\+on} mili segundos. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Descripción detallada}
Declaración de funciones de control del relay, buzzer y tarea del uso del expansor de entradas y salidas y entradas y salidas aisladas directas al ESP32. 

\begin{DoxyAuthor}{Autor}
Andrenacci -\/ Carra 
\end{DoxyAuthor}
\begin{DoxyVersion}{Versión}
2.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Fecha}
2025-\/11-\/06 
\end{DoxyDate}


Definición en el archivo \mbox{\hyperlink{io__control_8h_source}{io\+\_\+control.\+h}}.



\label{doc-func-members}
\Hypertarget{io__control_8h_doc-func-members}
\doxysubsection{Documentación de funciones}
\Hypertarget{io__control_8h_aed21490f8fc34ffb3d9021ed1cf7214a}\index{io\_control.h@{io\_control.h}!BuzzerEvantPost@{BuzzerEvantPost}}
\index{BuzzerEvantPost@{BuzzerEvantPost}!io\_control.h@{io\_control.h}}
\doxysubsubsection{\texorpdfstring{BuzzerEvantPost()}{BuzzerEvantPost()}}
{\footnotesize\ttfamily \label{io__control_8h_aed21490f8fc34ffb3d9021ed1cf7214a} 
esp\+\_\+err\+\_\+t Buzzer\+Evant\+Post (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{buzzer\+\_\+time\+\_\+on}{}\end{DoxyParamCaption})}



Envía una señal para hacer sonar el buzzer durante {\ttfamily buzzer\+\_\+time\+\_\+on} mili segundos. 


\begin{DoxyParams}[1]{Parámetros}
\mbox{\texttt{in}}  & {\em buzzer\+\_\+time\+\_\+on} & Tiempo en mili segundos durante el que el buzzer sonará.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}

\begin{DoxyItemize}
\item ESP\+\_\+\+OK Evento creado exitosamente
\item ESP\+\_\+\+FAIL Error al crear el evento 
\end{DoxyItemize}
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{io__control_8c_source_l00604}{604}} del archivo \mbox{\hyperlink{io__control_8c_source}{io\+\_\+control.\+c}}.

\Hypertarget{io__control_8h_af7133eb911ac63b8e81d756ec399ff78}\index{io\_control.h@{io\_control.h}!GPIO\_interrupt\_attendance\_task@{GPIO\_interrupt\_attendance\_task}}
\index{GPIO\_interrupt\_attendance\_task@{GPIO\_interrupt\_attendance\_task}!io\_control.h@{io\_control.h}}
\doxysubsubsection{\texorpdfstring{GPIO\_interrupt\_attendance\_task()}{GPIO\_interrupt\_attendance\_task()}}
{\footnotesize\ttfamily \label{io__control_8h_af7133eb911ac63b8e81d756ec399ff78} 
void GPIO\+\_\+interrupt\+\_\+attendance\+\_\+task (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{arg}{}\end{DoxyParamCaption})}



Tarea que en función de las interrupciones recibidas permite obtener cual de los pulsadores del teclado, entradas aisladas, termo switch o entradas del MCP2307 fue presionado. 

Trabaja con un antirrebote de 200ms. Cuando una entrada cabia su estado, la tarea vuelve a leer las entradas luego de 200ms para asegurarse el valor leído y recién ahí envía la señal correspondiente

\begin{DoxyRefDesc}{Tareas pendientes}
\item[\mbox{\hyperlink{todo__todo000001}{Tareas pendientes}}]Revisar correctamente el funcionamiento del filtro antirebote.\end{DoxyRefDesc}


Definición en la línea \mbox{\hyperlink{io__control_8c_source_l00386}{386}} del archivo \mbox{\hyperlink{io__control_8c_source}{io\+\_\+control.\+c}}.

\Hypertarget{io__control_8h_a99f1c5e09ded6ba05fdd6b1f9d76db99}\index{io\_control.h@{io\_control.h}!RelayEvantPost@{RelayEvantPost}}
\index{RelayEvantPost@{RelayEvantPost}!io\_control.h@{io\_control.h}}
\doxysubsubsection{\texorpdfstring{RelayEvantPost()}{RelayEvantPost()}}
{\footnotesize\ttfamily \label{io__control_8h_a99f1c5e09ded6ba05fdd6b1f9d76db99} 
esp\+\_\+err\+\_\+t Relay\+Evant\+Post (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{relay\+\_\+event}{}\end{DoxyParamCaption})}



Crea un evento para que el relay se activo o desactive de acuerdo a la variable {\ttfamily relay\+\_\+event}. 

Con {\ttfamily relay\+\_\+event} en 1 activa el ralay, con 0 desactiva el relay. Cualquier otro valor retorna ESP\+\_\+\+FAIL.


\begin{DoxyParams}[1]{Parámetros}
\mbox{\texttt{in}}  & {\em relay\+\_\+event} & Estado del relay\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}

\begin{DoxyItemize}
\item ESP\+\_\+\+OK Evento creado exitosamente
\item ESP\+\_\+\+FAIL Error al crear el evento 
\end{DoxyItemize}
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{io__control_8c_source_l00595}{595}} del archivo \mbox{\hyperlink{io__control_8c_source}{io\+\_\+control.\+c}}.

\Hypertarget{io__control_8h_aa4fbc272de389e539360bb6b7876dd7d}\index{io\_control.h@{io\_control.h}!set\_freq\_output@{set\_freq\_output}}
\index{set\_freq\_output@{set\_freq\_output}!io\_control.h@{io\_control.h}}
\doxysubsubsection{\texorpdfstring{set\_freq\_output()}{set\_freq\_output()}}
{\footnotesize\ttfamily \label{io__control_8h_aa4fbc272de389e539360bb6b7876dd7d} 
esp\+\_\+err\+\_\+t set\+\_\+freq\+\_\+output (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{freq}{}\end{DoxyParamCaption})}



Convierte la frecuencia en Hz que está girando el motor en el duty necesario para poder operar el PWM de la salida 0-\/10V. 

Permite configurar el duty del PWM desde 0 a 450Hz siendo que, para 0Hz la salida será 0V y para 450HZ serán 10V.


\begin{DoxyParams}[1]{Parámetros}
\mbox{\texttt{in}}  & {\em freq} & Es la frecuencia que está girando el motor.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}

\begin{DoxyItemize}
\item ESP\+\_\+\+OK PWM configurado correctamente
\item ESP\+\_\+\+ERR\+\_\+\+INVALID\+\_\+\+ARG Error al configurar el duty del PWM 
\end{DoxyItemize}
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{io__control_8c_source_l00359}{359}} del archivo \mbox{\hyperlink{io__control_8c_source}{io\+\_\+control.\+c}}.

