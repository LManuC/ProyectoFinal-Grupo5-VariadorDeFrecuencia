\doxysection{sys\+Control.\+h}
\hypertarget{sys_control_8h_source}{}\label{sys_control_8h_source}\index{C:/Users/User/LVFV\_ESP32/main/system/sysControl.h@{C:/Users/User/LVFV\_ESP32/main/system/sysControl.h}}
\mbox{\hyperlink{sys_control_8h}{Ir a la documentación de este archivo.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00009}00009\ \textcolor{preprocessor}{\#ifndef\ SPI\_MODULE\_H}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00010}00010\ \textcolor{preprocessor}{\#define\ SPI\_MODULE\_H}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00012}00012\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_l_v_f_v__system_8h}{../LVFV\_system.h}}"{}}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00019}\mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5}{00019}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00020}\mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5afb08ac5078702d238e336a813719e9ac}{00020}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5afb08ac5078702d238e336a813719e9ac}{SPI\_REQUEST\_START}}\ =\ 10,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 10\ -\/\ Comando\ de\ arranque\ de\ motor}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00021}\mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5a4baff6e3f2b188e4176a5a462f9c89d5}{00021}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5a4baff6e3f2b188e4176a5a462f9c89d5}{SPI\_REQUEST\_STOP}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 11\ -\/\ Comando\ de\ parada\ de\ motor}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00022}\mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5a7161c8e8f4f677d8f5537560bdb7f70e}{00022}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5a7161c8e8f4f677d8f5537560bdb7f70e}{SPI\_REQUEST\_SET\_FREC}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 12\ -\/\ Comando\ para\ configurar\ la\ frecuencia\ de\ régimen}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00023}\mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5afefeeb17807a057814da8ca09c8a9179}{00023}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5afefeeb17807a057814da8ca09c8a9179}{SPI\_REQUEST\_SET\_ACEL}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 13\ -\/\ Comando\ para\ setear\ la\ aceleración\ hasta\ la\ frecuencia\ de\ régimen}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00024}\mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5af17d7382d3bc959eb5de0c79bb5b740e}{00024}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5af17d7382d3bc959eb5de0c79bb5b740e}{SPI\_REQUEST\_SET\_DESACEL}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 14\ -\/\ Comando\ para\ setear\ la\ desaceleración\ a\ 0Hz\ o\ frecuencia\ de\ régimen}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00025}\mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5aa37aff4a7f01b47a80578af9f81f077f}{00025}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5aa37aff4a7f01b47a80578af9f81f077f}{SPI\_REQUEST\_SET\_DIR}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 15\ -\/\ Comando\ para\ setear\ la\ dirección\ -\/\ TODO}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00026}\mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5a2885786ad2c90e237e562f56737d5a51}{00026}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5a2885786ad2c90e237e562f56737d5a51}{SPI\_REQUEST\_GET\_FREC}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 16\ -\/\ Comando\ de\ consulta\ de\ frecuencia\ de\ régimen}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00027}\mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5a360ce739c6acb058bfeb3fa04f5ea4ea}{00027}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5a360ce739c6acb058bfeb3fa04f5ea4ea}{SPI\_REQUEST\_GET\_ACEL}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 17\ -\/\ Comando\ de\ consulta\ de\ aceleración}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00028}\mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5a25999f55d934be143ea601d3967ab5a3}{00028}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5a25999f55d934be143ea601d3967ab5a3}{SPI\_REQUEST\_GET\_DESACEL}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 18\ -\/\ Comando\ de\ consulta\ de\ desaceleración}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00029}\mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5a928c0d0c241acbd8dda3e853931a1d5d}{00029}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5a928c0d0c241acbd8dda3e853931a1d5d}{SPI\_REQUEST\_GET\_DIR}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 19\ -\/\ Comando\ de\ consulta\ de\ dirección\ de\ giro}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00030}\mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5a3b1235b2b1f4a2b76d6c9986e04d2c90}{00030}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5a3b1235b2b1f4a2b76d6c9986e04d2c90}{SPI\_REQUEST\_IS\_STOP}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 20\ -\/\ Comando\ de\ consulta\ para\ saber\ si\ el\ motor\ está\ parado\ o\ en\ movimiento}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00031}\mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5a3e1e4b098113ed293e6cc38961d15105}{00031}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5a3e1e4b098113ed293e6cc38961d15105}{SPI\_REQUEST\_EMERGENCY}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 21\ -\/\ Comando\ para\ entrar\ en\ estado\ de\ emergencia\ -\/\ deja\ de\ conmutar\ la\ salida}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00032}\mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5ad00e47a3fa1e44b0879a19b021b4c8d8}{00032}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5ad00e47a3fa1e44b0879a19b021b4c8d8}{SPI\_REQUEST\_RESPONSE}}\ =\ 0x50\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 80\ -\/\ Comando\ para\ pedirle\ al\ STM32\ la\ respuesta\ al\ comando\ enviado}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00033}00033\ \}\ \mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5}{SPI\_Request}};}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00040}\mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9}{00040}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00041}\mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9a5a270a88abe106fde26e3725dc54115e}{00041}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9a5a270a88abe106fde26e3725dc54115e}{SPI\_RESPONSE\_ERR}}\ =\ 0xA0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 160\ -\/\ Error\ en\ la\ transmisión\ del\ comando\ por\ problemas\ de\ inicialización\ del\ handler.\ El\ comando\ no\ sale\ del\ ESP32}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00042}\mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9a732ecbbd42a5e8809536040964c86427}{00042}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9a732ecbbd42a5e8809536040964c86427}{SPI\_RESPONSE\_ERR\_CMD\_UNKNOWN}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 161\ -\/\ El\ comando\ enviado\ no\ está\ dentro\ los\ posibles}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00043}\mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9aee0c8330799c2bab5168eb65d1c9f4ca}{00043}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9aee0c8330799c2bab5168eb65d1c9f4ca}{SPI\_RESPONSE\_ERR\_NO\_COMMAND}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 162\ -\/\ Llego\ mensaje\ pero\ sin\ comando}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00044}\mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9a67277b7287dabc065ea3585cc2e6630a}{00044}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9a67277b7287dabc065ea3585cc2e6630a}{SPI\_RESPONSE\_ERR\_MOVING}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 163\ -\/\ Se\ está\ intentando\ enviar\ un\ comando\ de\ start\ con\ el\ motor\ en\ movimiento}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00045}\mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9af85830305f68c29305f43e85ca1fcd2a}{00045}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9af85830305f68c29305f43e85ca1fcd2a}{SPI\_RESPONSE\_ERR\_NOT\_MOVING}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 164\ -\/\ Se\ está\ intentando\ enviar\ un\ comando\ de\ stop\ con\ el\ motor\ detenido}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00046}\mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9aa007b919a29275b8c8b7ac19d74a1efd}{00046}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9aa007b919a29275b8c8b7ac19d74a1efd}{SPI\_RESPONSE\_ERR\_DATA\_MISSING}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 165\ -\/\ Faltó\ enviar\ un\ dato\ dentro\ de\ la\ trama}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00047}\mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9a61474fe74a6c8ad2ee1ab7fd1c572dbb}{00047}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9a61474fe74a6c8ad2ee1ab7fd1c572dbb}{SPI\_RESPONSE\_ERR\_DATA\_INVALID}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 166\ -\/\ Los\ datos\ enviados\ como\ argumento\ dentro\ del\ comando\ están\ fuera\ de\ rango}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00048}\mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9aa69c0c081c3ae5a2ca82d94c06f112dd}{00048}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9aa69c0c081c3ae5a2ca82d94c06f112dd}{SPI\_RESPONSE\_ERR\_DATA\_OUT\_RANGE}},\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 167\ -\/\ Comando\ con\ datos\ fuera\ de\ rango\ permitido}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00049}\mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9a354b001329a9015ee8fa4d11fe98e1fb}{00049}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9a354b001329a9015ee8fa4d11fe98e1fb}{SPI\_RESPONSE\_OK}}\ =\ 0xFF,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 255\ -\/\ La\ comunicación\ entre\ ESP32\ y\ STM32\ fue\ exitosa}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00050}00050\ \}\ \mbox{\hyperlink{sys_control_8h_acdb815a404f9450379dae79745e5ccd9}{SPI\_Response}};}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00059}\mbox{\hyperlink{structspi__cmd__item__t}{00059}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00060}\mbox{\hyperlink{structspi__cmd__item__t_a8e022ff634b33af641a97b0e25f460b4}{00060}}\ \ \ \ \ \mbox{\hyperlink{sys_control_8h_abcc4e317bdfcd5f571d62f7ed92facc5}{SPI\_Request}}\ \mbox{\hyperlink{structspi__cmd__item__t_a8e022ff634b33af641a97b0e25f460b4}{request}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Comando\ a\ enviar\ al\ STM32}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00061}\mbox{\hyperlink{structspi__cmd__item__t_a0300a5e9803f32e219c0cecd82a25662}{00061}}\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structspi__cmd__item__t_a0300a5e9803f32e219c0cecd82a25662}{getValue}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Variable\ devuelta\ por\ el\ STM32\ en\ caso\ de\ ser\ un\ comando\ get}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00062}\mbox{\hyperlink{structspi__cmd__item__t_a1d47142663b11051af2efd6c907dbf31}{00062}}\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structspi__cmd__item__t_a1d47142663b11051af2efd6c907dbf31}{setValue}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Dato\ enviado\ con\ los\ comandos\ set}}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00063}00063\ \}\ \mbox{\hyperlink{structspi__cmd__item__t}{spi\_cmd\_item\_t}};}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00079}00079\ esp\_err\_t\ \mbox{\hyperlink{sys_control_8h_ad98df654b2d69b2699482f667045022e}{SPI\_Init}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00080}00080\ }
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00091}00091\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{sys_control_8h_a50b899a34931236e1ec86c160983f167}{SPI\_communication}}(\textcolor{keywordtype}{void}\ *arg);}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00092}00092\ }
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00105}00105\ esp\_err\_t\ \mbox{\hyperlink{sys_control_8h_aba4a84160e22ceea0cedd0ddcd454af4}{SystemEventPost}}(\mbox{\hyperlink{_l_v_f_v__system_8h_ab7a290ebff8e2a3230e8085ee87d4796}{systemSignal\_e}}\ event);}
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00106}00106\ }
\DoxyCodeLine{\Hypertarget{sys_control_8h_source_l00107}00107\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ SPI\_MODULE\_H}}

\end{DoxyCode}
