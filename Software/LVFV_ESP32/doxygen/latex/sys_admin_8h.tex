\doxysection{Referencia del archivo C\+:/\+Users/\+User/\+LVFV\+\_\+\+ESP32/main/system/sys\+Admin.h}
\hypertarget{sys_admin_8h}{}\label{sys_admin_8h}\index{C:/Users/User/LVFV\_ESP32/main/system/sysAdmin.h@{C:/Users/User/LVFV\_ESP32/main/system/sysAdmin.h}}


Header con las funciones de funcionamiento del sistema.  


{\ttfamily \#include "{}../\+LVFV\+\_\+system.\+h"{}}\newline
\doxysubsubsection*{Funciones}
\begin{DoxyCompactItemize}
\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{sys_admin_8h_a7bf3fbe77325da35d54220bf89fb26ce}{get\+\_\+status}} (\mbox{\hyperlink{structsystem__status__t}{system\+\_\+status\+\_\+t}} \texorpdfstring{$\ast$}{*}s\+\_\+e)
\begin{DoxyCompactList}\small\item\em Obtiene una réplica del status del sistema. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{sys_admin_8h_a62e7c27f84d0db690242eeb717c4e17b}{engine\+\_\+start}} ()
\begin{DoxyCompactList}\small\item\em Función que setea la frecuencia de régimen de acuerdo a lo configurado por el usuario y ejecuta la tarea accelerating. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{sys_admin_8h_abb59808fe42c3d4dd43e0f91d1f699a9}{engine\+\_\+stop}} ()
\begin{DoxyCompactList}\small\item\em Función que setea la frecuencia de régimen de acuerdo a lo configurado por el usuario y ejecuta la tarea desaccelerating. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sys_admin_8h_abd5d6163d42e21cfc63ce12acbb3cb64}{engine\+\_\+emergency\+\_\+stop\+\_\+release}} ()
\begin{DoxyCompactList}\small\item\em Pasa a estado SYSTEM\+\_\+\+EMERGENCY\+\_\+\+OK para que el usuario pueda enviar la señal de stop al STM32 necesaria para poder arrancar nuevamente el motor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sys_admin_8h_aa6c33be7b7273385ae39a1f682f28f75}{engine\+\_\+emergency\+\_\+stop}} ()
\begin{DoxyCompactList}\small\item\em Pasa la frecuencia de regimen a 0Hz y pasa a estado SYSTEM\+\_\+\+EMERGENCY. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{sys_admin_8h_a6b7a46f08b0f4ed784a8001e221a32a8}{change\+\_\+frequency}} (uint8\+\_\+t speed\+\_\+slector)
\begin{DoxyCompactList}\small\item\em Cambia la frecuencias de régimen del motor de acuerdo a la entrada aislada que haya ingresado. Ejecuta accelerating o desaccelerating, de acuerdo a lo necesario. \end{DoxyCompactList}\item 
\mbox{\hyperlink{_l_v_f_v__system_8h_a175b5f4c0244bf0bde30789366d31791}{system\+\_\+status\+\_\+e}} \mbox{\hyperlink{sys_admin_8h_ab7f234b01f6a10381a179c5dbfa5a3be}{update\+\_\+meas}} (uint16\+\_\+t vbus\+\_\+meas, uint16\+\_\+t ibus\+\_\+meas)
\begin{DoxyCompactList}\small\item\em Actualiza las mediciones de tensión y corriente del bus de contínua. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sys_admin_8h_a4c6328d6bdb3ae404b65b9046dc71446}{set\+\_\+frequency\+\_\+table}} (uint16\+\_\+t input\+\_\+variable, uint16\+\_\+t freq\+\_\+regime)
\begin{DoxyCompactList}\small\item\em Carga en el vector de velocidades configurables por entradas, las diferentes frecuencias de trabajo. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sys_admin_8h_a76880514447931f4c7457ce0407a6349}{set\+\_\+system\+\_\+settings}} (\mbox{\hyperlink{structfrequency__settings__t}{frequency\+\_\+settings\+\_\+t}} \texorpdfstring{$\ast$}{*}f\+\_\+s, \mbox{\hyperlink{structseccurity__settings__t}{seccurity\+\_\+settings\+\_\+t}} \texorpdfstring{$\ast$}{*}s\+\_\+s)
\begin{DoxyCompactList}\small\item\em Actualiza las variables de seguridad del sistema. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Descripción detallada}
Header con las funciones de funcionamiento del sistema. 

\begin{DoxyAuthor}{Autor}
Andrenacci -\/ Carra 
\end{DoxyAuthor}
\begin{DoxyVersion}{Versión}
2.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Fecha}
2025-\/11-\/06 
\end{DoxyDate}


Definición en el archivo \mbox{\hyperlink{sys_admin_8h_source}{sys\+Admin.\+h}}.



\label{doc-func-members}
\Hypertarget{sys_admin_8h_doc-func-members}
\doxysubsection{Documentación de funciones}
\Hypertarget{sys_admin_8h_a6b7a46f08b0f4ed784a8001e221a32a8}\index{sysAdmin.h@{sysAdmin.h}!change\_frequency@{change\_frequency}}
\index{change\_frequency@{change\_frequency}!sysAdmin.h@{sysAdmin.h}}
\doxysubsubsection{\texorpdfstring{change\_frequency()}{change\_frequency()}}
{\footnotesize\ttfamily \label{sys_admin_8h_a6b7a46f08b0f4ed784a8001e221a32a8} 
uint16\+\_\+t change\+\_\+frequency (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{speed\+\_\+slector}{}\end{DoxyParamCaption})}



Cambia la frecuencias de régimen del motor de acuerdo a la entrada aislada que haya ingresado. Ejecuta accelerating o desaccelerating, de acuerdo a lo necesario. 

De acuerdo a la frecuencia de régimen elegida y el tipo de variación, la frecuencia de destión tendrá diferentes valores, siempre menores a las de régimen.


\begin{DoxyParams}[1]{Parámetros}
\mbox{\texttt{in}}  & {\em speed\+\_\+slector} & Índice dentro del array con frecuencias de trabajo\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
0Hz si {\ttfamily speed\+\_\+selector} fue mal pasada como argumento, sino la frecuencia de destino 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{sys_admin_8c_source_l00142}{142}} del archivo \mbox{\hyperlink{sys_admin_8c_source}{sys\+Admin.\+c}}.

\Hypertarget{sys_admin_8h_aa6c33be7b7273385ae39a1f682f28f75}\index{sysAdmin.h@{sysAdmin.h}!engine\_emergency\_stop@{engine\_emergency\_stop}}
\index{engine\_emergency\_stop@{engine\_emergency\_stop}!sysAdmin.h@{sysAdmin.h}}
\doxysubsubsection{\texorpdfstring{engine\_emergency\_stop()}{engine\_emergency\_stop()}}
{\footnotesize\ttfamily \label{sys_admin_8h_aa6c33be7b7273385ae39a1f682f28f75} 
void engine\+\_\+emergency\+\_\+stop (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Pasa la frecuencia de regimen a 0Hz y pasa a estado SYSTEM\+\_\+\+EMERGENCY. 

Termina las tareas accelerating y desaccelerating 

Definición en la línea \mbox{\hyperlink{sys_admin_8c_source_l00128}{128}} del archivo \mbox{\hyperlink{sys_admin_8c_source}{sys\+Admin.\+c}}.

\Hypertarget{sys_admin_8h_abd5d6163d42e21cfc63ce12acbb3cb64}\index{sysAdmin.h@{sysAdmin.h}!engine\_emergency\_stop\_release@{engine\_emergency\_stop\_release}}
\index{engine\_emergency\_stop\_release@{engine\_emergency\_stop\_release}!sysAdmin.h@{sysAdmin.h}}
\doxysubsubsection{\texorpdfstring{engine\_emergency\_stop\_release()}{engine\_emergency\_stop\_release()}}
{\footnotesize\ttfamily \label{sys_admin_8h_abd5d6163d42e21cfc63ce12acbb3cb64} 
void engine\+\_\+emergency\+\_\+stop\+\_\+release (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Pasa a estado SYSTEM\+\_\+\+EMERGENCY\+\_\+\+OK para que el usuario pueda enviar la señal de stop al STM32 necesaria para poder arrancar nuevamente el motor. 



Definición en la línea \mbox{\hyperlink{sys_admin_8c_source_l00124}{124}} del archivo \mbox{\hyperlink{sys_admin_8c_source}{sys\+Admin.\+c}}.

\Hypertarget{sys_admin_8h_a62e7c27f84d0db690242eeb717c4e17b}\index{sysAdmin.h@{sysAdmin.h}!engine\_start@{engine\_start}}
\index{engine\_start@{engine\_start}!sysAdmin.h@{sysAdmin.h}}
\doxysubsubsection{\texorpdfstring{engine\_start()}{engine\_start()}}
{\footnotesize\ttfamily \label{sys_admin_8h_a62e7c27f84d0db690242eeb717c4e17b} 
uint16\+\_\+t engine\+\_\+start (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Función que setea la frecuencia de régimen de acuerdo a lo configurado por el usuario y ejecuta la tarea accelerating. 

En caso de que desaccelerating esté corriendo, antes de ejecutar accelerating, la cierra para no generar un efecto de subida y bajada de frecuencia. El status pasará a SYSTEM\+\_\+\+ACCLE\+\_\+\+DESACCEL

\begin{DoxyReturn}{Devuelve}
Frecuencia de destino configurada 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{sys_admin_8c_source_l00093}{93}} del archivo \mbox{\hyperlink{sys_admin_8c_source}{sys\+Admin.\+c}}.

\Hypertarget{sys_admin_8h_abb59808fe42c3d4dd43e0f91d1f699a9}\index{sysAdmin.h@{sysAdmin.h}!engine\_stop@{engine\_stop}}
\index{engine\_stop@{engine\_stop}!sysAdmin.h@{sysAdmin.h}}
\doxysubsubsection{\texorpdfstring{engine\_stop()}{engine\_stop()}}
{\footnotesize\ttfamily \label{sys_admin_8h_abb59808fe42c3d4dd43e0f91d1f699a9} 
uint16\+\_\+t engine\+\_\+stop (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Función que setea la frecuencia de régimen de acuerdo a lo configurado por el usuario y ejecuta la tarea desaccelerating. 

En caso de que accelerating esté corriendo, antes de ejecutar desaccelerating, la cierra para no generar un efecto de subida y bajada de frecuencia. El status pasará a SYSTEM\+\_\+\+ACCLE\+\_\+\+DESACCEL o SYSTEM\+\_\+\+BREAKING de a cuerdo a la acción que haya ocurrido

\begin{DoxyReturn}{Devuelve}
Frecuencia de destino configurada 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{sys_admin_8c_source_l00106}{106}} del archivo \mbox{\hyperlink{sys_admin_8c_source}{sys\+Admin.\+c}}.

\Hypertarget{sys_admin_8h_a7bf3fbe77325da35d54220bf89fb26ce}\index{sysAdmin.h@{sysAdmin.h}!get\_status@{get\_status}}
\index{get\_status@{get\_status}!sysAdmin.h@{sysAdmin.h}}
\doxysubsubsection{\texorpdfstring{get\_status()}{get\_status()}}
{\footnotesize\ttfamily \label{sys_admin_8h_a7bf3fbe77325da35d54220bf89fb26ce} 
esp\+\_\+err\+\_\+t get\+\_\+status (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsystem__status__t}{system\+\_\+status\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{s\+\_\+e}{}\end{DoxyParamCaption})}



Obtiene una réplica del status del sistema. 


\begin{DoxyParams}[1]{Parámetros}
\mbox{\texttt{out}}  & {\em s\+\_\+e} & Puntero a la variable donde se devolverá la información de status\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}

\begin{DoxyItemize}
\item ESP\+\_\+\+ERR\+\_\+\+NOT\+\_\+\+ALLOWED\+: En caso de que s\+\_\+e sea un puntero a NULL
\item ESP\+\_\+\+OK\+: Si la copia fue exitosa 
\end{DoxyItemize}
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{sys_admin_8c_source_l00176}{176}} del archivo \mbox{\hyperlink{sys_admin_8c_source}{sys\+Admin.\+c}}.

\Hypertarget{sys_admin_8h_a4c6328d6bdb3ae404b65b9046dc71446}\index{sysAdmin.h@{sysAdmin.h}!set\_frequency\_table@{set\_frequency\_table}}
\index{set\_frequency\_table@{set\_frequency\_table}!sysAdmin.h@{sysAdmin.h}}
\doxysubsubsection{\texorpdfstring{set\_frequency\_table()}{set\_frequency\_table()}}
{\footnotesize\ttfamily \label{sys_admin_8h_a4c6328d6bdb3ae404b65b9046dc71446} 
void set\+\_\+frequency\+\_\+table (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{input\+\_\+variable}{, }\item[{uint16\+\_\+t}]{freq\+\_\+regime}{}\end{DoxyParamCaption})}



Carga en el vector de velocidades configurables por entradas, las diferentes frecuencias de trabajo. 

La posición 0 del buffer es la frecuencia de regimen, la posición 7 es la frecuencia más baja distinta de cero


\begin{DoxyParams}[1]{Parámetros}
\mbox{\texttt{in}}  & {\em input\+\_\+variable} & Tipo de variación entre las diferentes entradas. 1 para variación lineal; 2 para variación cuadrática.\\
\hline
\mbox{\texttt{in}}  & {\em freq\+\_\+regime} & Frecuencia de regimen ingresada por el usuario \\
\hline
\end{DoxyParams}


Definición en la línea \mbox{\hyperlink{sys_admin_8c_source_l00220}{220}} del archivo \mbox{\hyperlink{sys_admin_8c_source}{sys\+Admin.\+c}}.

\Hypertarget{sys_admin_8h_a76880514447931f4c7457ce0407a6349}\index{sysAdmin.h@{sysAdmin.h}!set\_system\_settings@{set\_system\_settings}}
\index{set\_system\_settings@{set\_system\_settings}!sysAdmin.h@{sysAdmin.h}}
\doxysubsubsection{\texorpdfstring{set\_system\_settings()}{set\_system\_settings()}}
{\footnotesize\ttfamily \label{sys_admin_8h_a76880514447931f4c7457ce0407a6349} 
void set\+\_\+system\+\_\+settings (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structfrequency__settings__t}{frequency\+\_\+settings\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{f\+\_\+s}{, }\item[{\mbox{\hyperlink{structseccurity__settings__t}{seccurity\+\_\+settings\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{s\+\_\+s}{}\end{DoxyParamCaption})}



Actualiza las variables de seguridad del sistema. 


\begin{DoxyParams}[1]{Parámetros}
\mbox{\texttt{in}}  & {\em f\+\_\+s} & Puntero a la estructura con las variables de frecuencia a actualizar\\
\hline
\mbox{\texttt{in}}  & {\em s\+\_\+s} & Puntero a la estructura con las variables de seguridad a actualizar \\
\hline
\end{DoxyParams}


Definición en la línea \mbox{\hyperlink{sys_admin_8c_source_l00242}{242}} del archivo \mbox{\hyperlink{sys_admin_8c_source}{sys\+Admin.\+c}}.

\Hypertarget{sys_admin_8h_ab7f234b01f6a10381a179c5dbfa5a3be}\index{sysAdmin.h@{sysAdmin.h}!update\_meas@{update\_meas}}
\index{update\_meas@{update\_meas}!sysAdmin.h@{sysAdmin.h}}
\doxysubsubsection{\texorpdfstring{update\_meas()}{update\_meas()}}
{\footnotesize\ttfamily \label{sys_admin_8h_ab7f234b01f6a10381a179c5dbfa5a3be} 
\mbox{\hyperlink{_l_v_f_v__system_8h_a175b5f4c0244bf0bde30789366d31791}{system\+\_\+status\+\_\+e}} update\+\_\+meas (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{vbus\+\_\+meas}{, }\item[{uint16\+\_\+t}]{ibus\+\_\+meas}{}\end{DoxyParamCaption})}



Actualiza las mediciones de tensión y corriente del bus de contínua. 

En caso que superar los límites configurados, entra en SYSTEM\+\_\+\+EMERGENCY


\begin{DoxyParams}[1]{Parámetros}
\mbox{\texttt{in}}  & {\em vbus\+\_\+meas} & 
\begin{DoxyItemize}
\item Tensión de bus de contínua leído por el ADC
\end{DoxyItemize}\\
\hline
\mbox{\texttt{in}}  & {\em ibus\+\_\+meas} & 
\begin{DoxyItemize}
\item Corriente de bus de contínua leído por el ADC
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}

\begin{DoxyItemize}
\item SYSTEM\+\_\+\+IDLE\+: El sistema se encuentra en estado de reposo
\item SYSTEM\+\_\+\+ACCLE\+\_\+\+DESACCEL\+: El sistema se encuentra acelerando o desacelerando
\item SYSTEM\+\_\+\+REGIME\+: El sistema está con el motor girando a régimen
\item SYSTEM\+\_\+\+BREAKING\+: El sistema está frenando
\item SYSTEM\+\_\+\+EMERGENCY\+: El sistema entra por primera vez en estado de emergencia
\item SYSTEM\+\_\+\+EMERGENCY\+\_\+\+SENT\+: El sistema continúa en estado de emergencia 
\end{DoxyItemize}
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{sys_admin_8c_source_l00188}{188}} del archivo \mbox{\hyperlink{sys_admin_8c_source}{sys\+Admin.\+c}}.

